<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>在线考试系统</title>
        <!-- Tell the browser to be responsive to screen width -->
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
        <link rel="stylesheet" th:href="@{bower_components/bootstrap/dist/css/bootstrap.min.css}" />
        <link th:href="@{table/bootstrap-table.css}" rel="stylesheet">
        <link th:href="@{table/bootstrap3-editable/css/bootstrap-editable.css}" rel="stylesheet">
        <!-- Font Awesome -->
        <link rel="stylesheet" th:href="@{bower_components/font-awesome/css/font-awesome.min.css}">
        <!-- Ionicons -->
        <link rel="stylesheet" th:href="@{bower_components/Ionicons/css/ionicons.min.css}">
        <!-- Theme style -->
        <link rel="stylesheet" th:href="@{dist/css/AdminLTE.min.css}">
        <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
              page. However, you can choose any other skin. Make sure you
              apply the skin class to the body tag so the changes take effect. -->
        <link rel="stylesheet" th:href="@{dist/css/skins/skin-blue.min.css}">
        <link rel="stylesheet" th:href="@{css/style_LZ.css}" >
    </head>
    <!--
    BODY TAG OPTIONS:
    =================
    Apply one or more of the following classes to get the
    desired effect
    |---------------------------------------------------------|
    | SKINS         | skin-blue                               |
    |               | skin-black                              |
    |               | skin-purple                             |
    |               | skin-yellow                             |
    |               | skin-red                                |
    |               | skin-green                              |
    |---------------------------------------------------------|
    |LAYOUT OPTIONS | fixed                                   |
    |               | layout-boxed                            |
    |               | layout-top-nav                          |
    |               | sidebar-collapse                        |
    |               | sidebar-mini                            |
    |---------------------------------------------------------|
    -->

<body class="hold-transition skin-blue sidebar-mini" >


<!--@sec.authorize access="hasRole('ROLE_ADMIN')"-->



<div class="wrapper">

    <!-- Main Header -->
    <header class="main-header">

        <!-- Logo -->
        <a href="" class="logo">
            <!-- mini logo for sidebar mini 50x50 pixels -->
            <span class="logo-mini"><b>考试</b></span>
            <!-- logo for regular state and mobile devices -->
            <span class="logo-lg"><b>在线考试</b>系统</span>
        </a>

        <!-- Header Navbar -->
        <nav class="navbar navbar-static-top" role="navigation">
            <!-- Sidebar toggle button-->
            <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                <span class="sr-only">Toggle navigation</span>
            </a>
            <!-- Navbar Right Menu -->
            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">
                    <!-- Messages: style can be found in dropdown.less-->
                    <li class="dropdown messages-menu">
                        <!-- Menu toggle button -->
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-envelope-o"></i>
                            <span class="label label-success">4</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">You have 4 messages</li>
                            <li>
                                <!-- inner menu: contains the messages -->
                                <ul class="menu">
                                    <li><!-- start message -->
                                        <a href="#">
                                            <div class="pull-left">
                                                <!-- User Image -->
                                                <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                                            </div>
                                            <!-- Message title and timestamp -->
                                            <h4>
                                                Support Team
                                                <small><i class="fa fa-clock-o"></i> 5 mins</small>
                                            </h4>
                                            <!-- The message -->
                                            <p>Why not buy a new awesome theme?</p>
                                        </a>
                                    </li>
                                    <!-- end message -->
                                </ul>
                                <!-- /.menu -->
                            </li>
                            <li class="footer"><a href="#">See All Messages</a></li>
                        </ul>
                    </li>
                    <!-- /.messages-menu -->

                    <!-- Notifications Menu -->
                    <li class="dropdown notifications-menu">
                        <!-- Menu toggle button -->
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-bell-o"></i>
                            <span class="label label-warning">10</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">You have 10 notifications</li>
                            <li>
                                <!-- Inner Menu: contains the notifications -->
                                <ul class="menu">
                                    <li><!-- start notification -->
                                        <a href="#">
                                            <i class="fa fa-users text-aqua"></i> 5 new members joined today
                                        </a>
                                    </li>
                                    <!-- end notification -->
                                </ul>
                            </li>
                            <li class="footer"><a href="#">View all</a></li>
                        </ul>
                    </li>
                    <!-- Tasks Menu -->
                    <li class="dropdown tasks-menu">
                        <!-- Menu Toggle Button -->
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-flag-o"></i>
                            <span class="label label-danger">9</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">You have 9 tasks</li>
                            <li>
                                <!-- Inner menu: contains the tasks -->
                                <ul class="menu">
                                    <li><!-- Task item -->
                                        <a href="#">
                                            <!-- Task title and progress text -->
                                            <h3>
                                                Design some buttons
                                                <small class="pull-right">20%</small>
                                            </h3>
                                            <!-- The progress bar -->
                                            <div class="progress xs">
                                                <!-- Change the css width attribute to simulate progress -->
                                                <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar"
                                                     aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                                                    <span class="sr-only">20% Complete</span>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <!-- end task item -->
                                </ul>
                            </li>
                            <li class="footer">
                                <a href="#">View all tasks</a>
                            </li>
                        </ul>
                    </li>
                    <!-- User Account Menu -->
                    <li class="dropdown user user-menu">
                        <!-- Menu Toggle Button -->
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <!-- The user image in the navbar-->
                            <img src="dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
                            <!-- hidden-xs hides the username on small devices so only the image appears. -->
                            <!--<span class="hidden-xs" th:text="${session.SPRING_SECURITY_CONTEXT.authentication.principal.username}">123</span>-->
                            <span class="hidden-xs"  th:text="${session.name}" >123</span>


                        </a>
                        <ul class="dropdown-menu">
                            <!-- The user image in the menu -->
                            <li class="user-header">
                                <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">

                                <p th:text="${session.name}" >
                                    Alexander Pierce - Web Developer
                                <p th:text="${session.class}">Member since Nov. 2012</p>
                                </p>
                            </li>
                            <!-- Menu Body -->
                            <li class="user-body">
                                <div class="row">
                                    <div class="col-xs-4 text-center">
                                        <a href="#" sec:authorize="hasRole('ROLE_DIS')">Followers</a>
                                    </div>
                                    <div class="col-xs-4 text-center">
                                        <a th:text="${session.role}" >Sales</a>
                                    </div>
                                    <div class="col-xs-4 text-center">
                                        <a href="#" sec:authorize="hasRole('ROLE_DIS')">Friends</a>
                                    </div>
                                </div>
                                <!-- /.row -->
                            </li>
                            <!-- Menu Footer-->
                            <li class="user-footer">
                                <div class="pull-left">
                                    <a href="#" class="btn btn-default btn-flat">Profile</a>
                                </div>
                                <div class="pull-right">
                                    <a href="/logout " class="btn btn-default btn-flat">Sign out</a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <!-- Control Sidebar Toggle Button -->
                    <li>
                        <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

            <!-- Sidebar user panel (optional) -->
            <div class="user-panel">
                <div class="pull-left image">
                    <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                </div>
                <div class="pull-left info">
                    <p th:text="${session.name}">Alexander Pierce</p>
                    <!-- Status -->
                    <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
                </div>
            </div>

            <!-- search form (Optional) -->
            <form action="#" method="get" class="sidebar-form">
                <div class="input-group">
                    <input type="text" name="q" class="form-control" placeholder="Search...">
                    <span class="input-group-btn">
              <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
              </button>
            </span>
                </div>
            </form>
            <!-- /.search form -->

            <!-- Sidebar Menu -->
            <ul class="sidebar-menu" data-widget="tree">
                <li class="header">HEADER</li>
                <!-- Optionally, you can add icons to the links -->
                <li ><a th:href="@{${session.ip_test}}"><i class="fa fa-link"></i> <span>数据统计</span></a></li>
                <li ><a href="#"><i class="fa fa-link"></i> <span>当前考试</span></a></li>
                <li class="treeview">
                    <a href="#"><i class="fa fa-link"></i> <span>常用工具</span>
                        <span class="pull-right-container">
                <i class="fa fa-angle-left pull-right"></i>
              </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="#">工具1</a></li>
                        <li><a href="#">工具2</a></li>
                    </ul>
                </li>

                <li class="treeview" sec:authorize="hasRole('ROLE_TEACHER')"><a href="#"><i class="fa fa-link"></i>
                    <span>个人题库</span>
                    <span class="pull-right-container">
                <i class="fa fa-angle-left pull-right"></i>
              </span>
                </a>
                    <ul class="treeview-menu">
                        <li><a th:href="@{${session.ip_test}+'/items'}">题库管理</a></li>
                        <li><a th:href="@{${session.ip_test}+'/examinations'}">考卷管理</a></li>
                    </ul>
                </li>

                <li  class="active treeview menu-open" sec:authorize="hasRole('ROLE_ADMIN')"><a href="#"><i class="fa fa-link"></i>
                    <span>管理</span>
                    <span class="pull-right-container">
                <i class="fa fa-angle-left pull-right"></i>
              </span>
                </a>
                    <ul class="treeview-menu">
                        <li class="active"><a th:href="@{${session.ip_test}+'/adduser'}">用户管理</a></li>
                        <li><a href="#">考试管理</a></li>
                    </ul>
                </li>
            </ul>
            <!-- /.sidebar-menu -->
        </section>
        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                用户管理
                <small>增删改查用户</small>
            </h1>
            <ol class="breadcrumb">
                <li><a th:href="@{${session.ip_test}}"><i class="fa fa-dashboard"></i> 首页</a></li>
                <li class="active">管理</li>
                <li class="active">用户管理</li>
            </ol>
        </section>

        <!-- Main content -->
        <section class="content container-fluid" >
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">新增</h4>
                        </div>
                        <div class="modal-body">
                            <!--<form id="updateform">-->
                                <!--<div class="form-group">-->
                                    <!--<label for="name" class="control-label">用户名:</label>-->
                                    <!--<input type="text" class="form-control" id="name" name="loginname">-->
                                <!--</div>-->
                                <!--<div class="form-group">-->
                                    <!--<label for="username" class="control-label">账号:</label>-->
                                    <!--<input type="text" class="form-control" id="username" name="email">-->
                                <!--</div>-->
                                <!--<div class="form-group">-->
                                    <!--<label for="password" class="control-label">密码:</label>-->
                                    <!--<input type="text" class="form-control" id="password" name="phone">-->
                                <!--</div>-->
                                <!--<div class="form-group">-->
                                    <!--<label for="class" class="control-label">所属:</label>-->
                                    <!--<input type="text" class="form-control" id="class" name="class">-->
                                <!--</div>-->
                                <!--<div class="form-group">-->
                                <!--<label >权限：</label>-->
                                <!--<select id="select_test">-->
                                <!--<option value="1">学生</option>-->
                                <!--<option value="2">教师</option>-->
                                <!--<option value="3">管理</option>-->
                                <!--</select>-->
                                <!--</div>-->
                                <!--<div class="text-right">-->
                                    <!--<span id="returnMessage" class="glyphicon"> </span>-->
                                    <!--<button type="button" class="btn btn-default right" data-dismiss="modal">关闭</button>-->
                                    <!--<button id="btn_submit" type="button" class="btn btn-primary">保存</button>-->
                                    <!--&lt;!&ndash;<div class="modal-footer">&ndash;&gt;-->
                                        <!--&lt;!&ndash;<button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>关闭</button>&ndash;&gt;-->
                                        <!--&lt;!&ndash;<button type="button" id="btn_submit" class="btn btn-primary" data-dismiss="modal"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>保存</button>&ndash;&gt;-->
                                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                                <!--</div>-->
                            <!--</form>-->
                            <form action="" id="applyForm">
                            <div class="form-group">
                                <label for="txt_name">姓名</label>
                                <input type="text" name="name" class="form-control" id="txt_name" placeholder="用户姓名">
                            </div>
                            <div class="form-group">
                                <label for="txt_username">账号</label>
                                <input type="text" name="usernmae" class="form-control" id="txt_username" placeholder="登录账号或职工编号">
                            </div>
                            <div class="form-group">
                                <label for="txt_password">密码</label>
                                <input type="text" name="password" class="form-control" id="txt_password" placeholder="账号密码">
                            </div>
                            <div class="form-group">
                                <label for="txt_class">所属</label>
                                <input type="text" name="class" class="form-control" id="txt_class" placeholder="学生班级或教工院系">
                            </div>
                            <div class="form-group">
                                <label >权限：</label>
                                <select id="select_test">
                                    <option value="1">学生</option>
                                    <option value="2">教师</option>
                                    <option value="3">管理</option>
                                </select>
                            </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>关闭</button>
                            <button type="button" id="btn_submit" class="btn btn-primary" data-dismiss="modal"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--------------------------
            | Your Page Content Here |
             -------------------------->
            <div class="container-fluid">
                <div id="toolbar" class="btn-group">
                    <button id="btn_add" type="button" class="btn btn-default">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
                    </button>
                    <!--<button id="btn_edit" type="button" class="btn btn-default">-->
                        <!--<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改-->
                    <!--</button>-->
                    <button id="btn_delete" type="button" class="btn btn-default">
                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
                    </button>
                    <!--<button id="btn_info" type="button" class="btn btn-default">-->
                        <!--<span class="fa fa-info" aria-hidden="true"></span>详情-->
                    <!--</button>-->
                </div>
                <table id="table" >
                </table>
            </div>
        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <!-- Main Footer -->
    <footer class="main-footer">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
            Anything you want
        </div>
        <!-- Default to the left -->
        <strong>Copyright &copy; 2016 <a href="#">Company</a>.</strong> All rights reserved.
    </footer>

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <!-- Create the tabs -->
        <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
            <li class="active"><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
            <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">
            <!-- Home tab content -->
            <div class="tab-pane active" id="control-sidebar-home-tab">
                <h3 class="control-sidebar-heading">Recent Activity</h3>
                <ul class="control-sidebar-menu">
                    <li>
                        <a href="javascript:;">
                            <i class="menu-icon fa fa-birthday-cake bg-red"></i>

                            <div class="menu-info">
                                <h4 class="control-sidebar-subheading">Langdon's Birthday</h4>

                                <p>Will be 23 on April 24th</p>
                            </div>
                        </a>
                    </li>
                </ul>
                <!-- /.control-sidebar-menu -->

                <h3 class="control-sidebar-heading">Tasks Progress</h3>
                <ul class="control-sidebar-menu">
                    <li>
                        <a href="javascript:;">
                            <h4 class="control-sidebar-subheading">
                                Custom Template Design
                                <span class="pull-right-container">
                    <span class="label label-danger pull-right">70%</span>
                  </span>
                            </h4>

                            <div class="progress progress-xxs">
                                <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
                            </div>
                        </a>
                    </li>
                </ul>
                <!-- /.control-sidebar-menu -->

            </div>
            <!-- /.tab-pane -->
            <!-- Stats tab content -->
            <div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div>
            <!-- /.tab-pane -->
            <!-- Settings tab content -->
            <div class="tab-pane" id="control-sidebar-settings-tab">
                <form method="post">
                    <h3 class="control-sidebar-heading">General Settings</h3>

                    <div class="form-group">
                        <label class="control-sidebar-subheading">
                            Report panel usage
                            <input type="checkbox" class="pull-right" checked>
                        </label>

                        <p>
                            Some information about this general settings option
                        </p>
                    </div>
                    <!-- /.form-group -->
                </form>
            </div>
            <!-- /.tab-pane -->
        </div>
    </aside>
    <!-- /.control-sidebar -->
    <!-- Add the sidebar's background. This div must be placed
    immediately after the control sidebar -->
    <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- REQUIRED JS SCRIPTS -->

<!-- jQuery 3 -->
<script th:src="@{bower_components/jquery/dist/jquery.min.js}"></script>
<!-- Bootstrap 3.3.7 -->
<script th:src="@{bower_components/bootstrap/dist/js/bootstrap.min.js}"></script>
<!-- AdminLTE App -->
<script th:src="@{dist/js/adminlte.min.js}"></script>
<!--Script Open Pannel--->

<script th:src="@{table/bootstrap-table.js}"></script>
<script th:src="@{table/bootstrap3-editable/js/bootstrap-editable.js}"></script>
<script th:src="@{table/bootstrap-table-editable.js}"></script>
<script th:src="@{table/locale/bootstrap-table-zh-CN.js}"></script>



<script type="text/javascript">

    $(function () {

        //1.初始化Table
        var oTable = new TableInit();
        oTable.Init();

        //2.初始化Button的点击事件
        var oButtonInit = new ButtonInit();
        oButtonInit.Init();

    });
    var TableInit = function () {
        var oTableInit = new Object();
        //初始化Table
        oTableInit.Init = function () {
            $('#table').bootstrapTable({
                url: '/adduser_cx',         //请求后台的URL（*）
                method: 'get',                      //请求方式（*）
                toolbar: '#toolbar',                //工具按钮用哪个容器
                striped: true,                      //是否显示行间隔色
                cache: true,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
                pagination: true,                   //是否显示分页（*）
                sortable: false,                     //是否启用排序
                sortOrder: "asc",                   //排序方式
                queryParams: oTableInit.queryParams,//传递参数（*）
                sidePagination: "client",           //分页方式：client客户端分页，server服务端分页（*）
                pageNumber:1,                       //初始化加载第一页，默认第一页
                pageSize: 5,                       //每页的记录行数（*）
                pageList: [5,10, 25, 50, 100],        //可供选择的每页的行数（*）
                search: true,                       //是否显示表格搜索，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大
                strictSearch: true,
                showColumns: true,                  //是否显示所有的列
                showRefresh: true,                  //是否显示刷新按钮
                minimumCountColumns: 2,             //最少允许的列数
                clickToSelect: false,                //是否启用点击选中行
                height: 500,                        //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
                uniqueId: "ID",                     //每一行的唯一标识，一般为主键列
                showToggle:true,                    //是否显示详细视图和列表视图的切换按钮
                cardView: false,                    //是否显示详细视图
                detailView: false,                   //是否显示父子表
                columns: [
                    {
                        checkbox: true
                    },
                    {
                        field : 'id',
                        title : 'ID',
                        // align : 'center'
                    },
                    {
                        field : 'name',
                        title : '姓名',
                        // align : 'center',
                        editable: {
                            type: 'text',
                            title: '姓名',
                            validate: function (v) {
                                if (!v) return '用户名不能为空';
                            }

                        }

                    },
                    {
                        field : 'username',
                        title : '账号',
                        align : 'center',

                    },

                    {
                        field : 'bj',
                        title : '所属',
                        // align : 'center',
                        editable: {
                            type: 'text',
                            title: '所属',
                            validate: function (v) {
                                if (!v) return '用户名不能为空';

                            }
                        }
                    },
                    {
                        field : 'roles',
                        title : '权限',
                        // align : 'center',
                        editable: {
                            type: 'select',
                            title: '权限',
                            source:[{value:"1",text:"学生"},{value:"2",text:"教师"},{value:"3",text:"管理"}]
                        }
                    } ],
                onEditableSave: function (field, row, oldValue, $el) {
                    $("#table").bootstrapTable("resetView");
                    $.ajax({
                        type: "post",
                        url: "/adduser/Edit",
                        data: {
                            "Edit_name":row.id,
                            "name":field,
                            "oldValue":oldValue,
                            "newValue":row[field]
                        },
                        dataType: 'html',
                        success: function (data, status) {
                            if (status == "success") {
                                if(data!="success")
                                $('table').bootstrapTable('refresh');
                                // $('table').bootstrapTable('updateRow', {index: row.id, row: 2321});
                                // $el.css("backgroundColor", "");
                                // $el.removeClass("PinkBackground");
                                // // $el.removeClass("blueBackground");
                                // // $el.removeClass("greyBackground");
                                // $el.addClass("redBackground");
                            }
                        },
                        error: function () {
                            alert('编辑失败');
                        },
                        complete: function () {

                        }

                    });
                }

            });

        };
        return oTableInit;
    };
    var ButtonInit = function () {
        var oInit = new Object();
        var postdata = {};


        oInit.Init = function () {
            //初始化页面上面的按钮事件
            $("#btn_add").click(function () {
                  $("#myModalLabel").text("新增");
                // $('txt_username').text("");
                $('#txt_username').val("");
                $('#txt_password').val("");
                $('#txt_name').val("");
                $('#txt_class').val("");
                $('#select_test').val(1);
                 $('#myModal').modal();
            });
            $("#btn_delete").click(function () {

                var rows = $("#table").bootstrapTable('getSelections');
                if (rows.length== 0) {
                    alert("请先选择要删除的记录!");
                    return;
                }
                var id = '';
                for (var i = 0; i < rows.length; i++) {
                    id += rows[i]['id'] + ",";
                }
                id = id.substring(0, id.length - 1);
                deleteUser(id);


            });
            $("#btn_submit").click(function () {
                $.ajax({
                    type:'POST',  //提交方法是POST
                    url:'/adduser/Add', //请求的路径
                    data:{username:document.getElementById("txt_username").value,
                        password:document.getElementById("txt_password").value,
                        name:document.getElementById("txt_name").value,
                        BJ:document.getElementById("txt_class").value,
                        roles:document.getElementById("select_test").value
                    }, //以JSON字符串形式把 user 传到后台
                    dataType:'html', //后台返回的数据类型是html文本
                    timeout:1000,  //请求超时时间，毫秒
                    success:function(){   //请求成功的回调方法
                        // 摧毁表格
                        // $("#table").bootstrapTable('destroy');
                        // 刷新表格数据
                        $("#table").bootstrapTable('refresh', {url: '/adduser_cx'});


                    },
                    error:function(){  //请求失败的回调方法
                        alert("添加失败，请检查用户名是否重复！");
                    }

                });

                // document.getElementById("myModel").reset();
            });

            // $("#applyForm").bootstrapValidator({
            //     message: '输入值不合法',
            //     //excluded: [':disabled', ':hidden', ':not(:visible)'],
            //     live: 'enabled',
            //     feedbackIcons: {
            //         valid: 'glyphicon glyphicon-ok',
            //         invalid: 'glyphicon glyphicon-remove',
            //         validating: 'glyphicon glyphicon-refresh'
            //     },
            //     fields: {
            //         userName: {
            //             message: '用户名不合法',
            //             validators: {
            //                 notEmpty: {
            //                     message: '用户名不能为空'
            //                 },
            //                 stringLength: {
            //                     min: 2,
            //                     max: 4,
            //                     message: '请输入2到4个字符'
            //                 },
            //                 regexp: {
            //                     regexp: /^[a-zA-Z0-9_\. \u4e00-\u9fa5 ]+$/,
            //                     message: '用户名只能由字母、数字、点、下划线和汉字组成 '
            //                 }
            //             }
            //         },
            //         email: {
            //             validators: {
            //                 notEmpty: {
            //                     message: '邮箱不能为空'
            //                 },
            //                 emailAddress: {
            //                     message: '邮箱地址格式有误'
            //                 }
            //             }
            //         }
            //     }
            // });


        };
        return oInit;
    };

    function deleteUser(id) {
        var msg = "您真的确定要删除吗？";
        if (confirm(msg) == true) {
            $.ajax({
                url: "/adduser/Delete",
                type: "post",
                data: {
                    id: id
                },
                success: function (data) {
                    var arr=data.split(",");
                    alert("成功删除"+arr[0]+"条数据!");
                    if(arr[1]!=0)alert(arr[1]+"条数据删除失败!");
                    // alert(data)
                    //重新加载记录
                    //重新加载数据
                    $("#table").bootstrapTable('refresh', {url: '/adduser_cx'});
                }
            });
        }
    }
</script>
</body>
</html>